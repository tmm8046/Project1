<!DOCTYPE html>
<html lang="en">
<head>
    <title></title>
    <link rel="stylesheet" href="styles/styles.css"/>
    <script>
        const row = 5;
        const column = 5;
        const pattern = '1, 2, 4, 8, 16, 32, 64, 128, 256, 512';

        const gridArray = new Array(row).fill(new Array(column));
        const guessButton = document.querySelector('#guessButton');
        const grid = document.querySelector("#grid");
        let guessNumber = 1;

        // Resets the pattern daily
        const reset = () => {
            guessNumber = 1;
        };

        const requestUpdate = async (userForm) => {
            
        }

        // Draws the grid
        const drawGrid = (row, column) => {
            for (let i = 0; i < row; i++) {
                for (let j = 0; j < column; j++) {
                    let gridBox = document.createElement('div');
                    gridBox.class = 'tile';
                    gridArray.push(gridBox);
                    document.querySelector("#grid").appendChild(gridBox);
                }
            }
        };

        // temporary
        const drawTemporaryGrid = (column) => {
            for (let i = 0; i < column; i++) {
                const textbox = document.createElement("input");
                textbox.type = 'text';
                textbox.id = `tile${i}`;
                document.querySelector("#grid").appendChild(textbox);
            }
        };

        // Checks if the user response matches the last 5 numbers in the pattern
        const checkAnswer = () => {
            const answer = pattern.split(',');
            // let tile = document.querySelector(`tile${guessNumber}`);
            const guess = document.querySelector(`#tile${guessNumber}`).value.split(',');
            for (let i = 0; i < answer.length / 2; i++) {
                if (guess[i] != answer[answer.length / 2 + i]) {
                    document.querySelector("#answerStatus").innerHTML = "Incorrect";
                    return false;
                }
            }
            document.querySelector("#answerStatus").innerHTML = "Congradulations!";
            return true;
        };

        const init = () => {
            drawTemporaryGrid(column);
            const answer = pattern.split(',');
            for (let i = 0; i < answer.length / 2; i++){
                document.querySelector('#hint').innerHTML += `${answer[i]}, `;
            }
            document.querySelector('#guessButton').addEventListener("click", () => {
                checkAnswer();
                guessNumber++;
            });
        };

        window.onload = init;
    </script>
</head>
<body>
    <div>
        <div id="hint">

        </div>
        <div id="answerStatus">

        </div>
        <div id="grid">
            
        </div>
        <div id="keyboard">
            <button id="guessButton">Guess</button>
        </div>
    </div>
</body>
</html>